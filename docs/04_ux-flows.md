# 04_ux-flows.md — UXフロー / 画面設計（MVP）

- プロダクト：飲食店向け シフト管理SaaS（個人開発MVP）
- 根拠ドキュメント：`docs/01_problem-users.md` / `docs/02_requirements.md`
- 対象：1店舗（店長 + スタッフ）
- 更新：v0.1

---

## 0. このドキュメントの目的

- MVPで必要な画面数を確定する
- 各画面で「最低限できるべきこと」を固定する
- 実装時に画面追加が増えすぎるのを防ぐ

---

## 1. MVPで必要な画面数

結論：**11〜13画面**。  
まずは11画面（統合版）で着手し、必要なら13画面（分離版）に拡張する。

- 11画面（推奨）：`登録+招待参加` を統合、`通知+変更履歴` を統合
- 13画面（拡張）：登録/招待、通知/履歴をそれぞれ分離

---

## 2. 画面一覧（11画面・推奨）

### UX-01 ログイン

- 対象：店長 / スタッフ
- 目的：認証の入口（FR-01）
- 必須機能
  - メール/パスワード入力
  - ログイン実行
  - 失敗時エラーメッセージ
  - ログイン成功時にダッシュボードへ遷移

### UX-02 アカウント作成・招待参加

- 対象：店長 / スタッフ
- 目的：初回導線を1画面で完結（FR-03, FR-04）
- 必須機能
  - 店長として新規登録（店舗作成導線へ）
  - スタッフとして招待コード/リンクで参加
  - 登録完了後にロール別の初期画面へ遷移

### UX-03 店舗作成（店長オンボーディング）

- 対象：店長
- 目的：店舗未作成状態の解消（FR-03）
- 必須機能
  - 店舗名など最小項目の入力
  - 作成完了後、ダッシュボードへ遷移

### UX-04 ダッシュボード（ロール別）

- 対象：店長 / スタッフ
- 目的：次にやるべき行動を最短表示
- 必須機能
  - 店長：未提出人数、未対応申請件数、直近期間の状態表示
  - スタッフ：提出期限、次回勤務、未読通知件数
  - 主要画面へのショートカット

### UX-05 シフト期間一覧

- 対象：店長（スタッフは閲覧のみでも可）
- 目的：期間単位で業務を管理（FR-06, FR-08）
- 必須機能
  - 期間一覧表示（開始日/終了日/状態）
  - 店長のみ期間新規作成
  - 期間詳細への遷移

### UX-06 シフト期間詳細（店長）

- 対象：店長
- 目的：回収と公開の管理ハブ（FR-07, FR-10, FR-14）
- 必須機能
  - 提出締切設定
  - 提出済み/未提出の可視化
  - 公開/公開後更新の導線
  - シフト編集画面への遷移

### UX-07 希望提出（スタッフ）

- 対象：スタッフ
- 目的：素早い希望提出（FR-09）
- 必須機能
  - 期間ごとの希望入力（入れる時間帯/入れない）
  - 提出、締切前の再編集
  - 締切超過時の編集不可表示

### UX-08 シフト編集（店長）

- 対象：店長
- 目的：手動で割当を完成させる（FR-12, FR-13）
- 必須機能
  - 日×時間帯の割当編集（追加/削除/入替）
  - 保存
  - 不足/過剰の簡易表示（任意強化）

### UX-09 確定シフト閲覧（スタッフ）

- 対象：スタッフ
- 目的：自分の確定シフトを迷わず確認（FR-15, FR-18）
- 必須機能
  - 自分の割当のみ明確表示
  - 期間切替（日別/期間別）
  - 最新版であることの明示

### UX-10 欠勤/変更申請（スタッフ）

- 対象：スタッフ
- 目的：欠勤・変更を型化して申請（FR-16）
- 必須機能
  - 対象シフト選択
  - 欠勤/変更区分と理由入力
  - 申請状態（未対応/承認/却下）表示

### UX-11 申請管理・通知/履歴（店長中心）

- 対象：店長（通知はスタッフも閲覧）
- 目的：変更対応と証跡管理を一箇所で実施（FR-17, FR-19, FR-20）
- 必須機能
  - 申請一覧、承認/却下操作
  - 変更後の反映導線（シフト編集へ）
  - 通知一覧（公開/変更確定/締切近い）
  - 変更履歴一覧（誰が/いつ/何を）

---

## 3. 主要UXフロー（MVPで必ず通す）

### Flow-A 店長：期間作成〜公開

1. `UX-01` ログイン
2. `UX-04` ダッシュボード
3. `UX-05` 期間一覧で新規期間作成
4. `UX-06` 期間詳細で締切設定/提出状況確認
5. `UX-08` シフト編集で割当作成
6. `UX-06` に戻って公開

成功条件
- 公開後、スタッフ側 `UX-09` で確定版が閲覧できる

### Flow-B スタッフ：希望提出

1. `UX-01` ログイン（初回は `UX-02` 招待参加）
2. `UX-04` ダッシュボードから対象期間へ
3. `UX-07` 希望提出

成功条件
- 店長側 `UX-06` で提出済みとして反映される

### Flow-C 変更対応（スタッフ申請→店長反映）

1. スタッフが `UX-10` で欠勤/変更申請
2. 店長が `UX-11` で承認/却下
3. 承認時は店長が `UX-08` で割当更新
4. スタッフが `UX-09` で最新版確認
5. 店長が `UX-11` で履歴確認

成功条件
- 変更が確定シフトに反映され、履歴が残る

---

## 4. ロール別ナビゲーション（最小）

### 店長

- ダッシュボード
- 期間一覧
- 期間詳細
- シフト編集
- 申請管理・通知/履歴

### スタッフ

- ダッシュボード
- 希望提出
- 確定シフト閲覧
- 欠勤/変更申請
- 通知（`UX-11` の通知タブのみ可）

---

## 5. 画面設計のルール（MVP）

- 店長の主要操作は3クリック以内を目標にする
- スタッフ画面はスマホで片手操作できるUIを優先する
- 重要状態（締切、公開済み、未対応件数）は常時見える位置に置く
- 編集権限のない操作は非表示または明確に無効化する
- 公開後の変更は必ず履歴記録対象にする

---

## 6. 13画面版にする場合の分割ポイント

- `UX-02` を分離
  - `アカウント作成`
  - `招待参加`
- `UX-11` を分離
  - `申請管理`
  - `通知/変更履歴`

この分割は、実装後に画面が複雑化した時点で実施する。
